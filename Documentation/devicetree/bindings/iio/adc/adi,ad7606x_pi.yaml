# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/iio/adc/adi,ad7606x_pi.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Analog Devices AD7606x Simultaneous Sampling ADC - Parallel Interface

maintainers:
  - Alin-Tudor Sferle <alin-tudor.sferle@analog.com>

description: |
  Analog Devices AD7606x Simultaneous Sampling ADC - Parallel Interface
  https://www.analog.com/media/en/technical-documentation/data-sheets/ad7606b.pdf
  https://www.analog.com/media/en/technical-documentation/data-sheets/ad7606c-16.pdf
  https://www.analog.com/media/en/technical-documentation/data-sheets/ad7606c-18.pdf
  https://www.analog.com/media/en/technical-documentation/user-guides/EVAL-AD7606BFMCZ-UG-1225.pdf
  https://www.analog.com/media/en/technical-documentation/user-guides/eval-ad7606c-fmcz-ug-1870.pdf

properties:

  compatible:
    enum:
      - ad7606x-pi-16
      - ad7606x-pi-18

  reg:
    maxItems: 1

  clocks:
    maxItems: 1
    description:
      Sampling clock

  clock-names:
    maxItems: 1
    description:
      Names of used clock in tree

  vref: true

  dmas:
    maxItems: 1

  dma-names:
    items:
      - const: ad7606x-pi-adc-dma

  pwms:
    maxItems: 1
    description:
      PWM signal used to start the sampling procedure

  pwm-names:
    items:
      - const: cnvst_n

  adc_serpar:
    description:
      Must be the device tree identifier of the SERPAR pin. This pin is used
      to specify AD7606x chip interface type - logic high indicates Serial,
      and logic low indicates Parallel interface.
    maxItems: 1

  adc_refsel:
    description:
      Must be the device tree identifier of the REF SELECT pin. This pin is
      set to logic high, the internal reference is selected and enabled.
      If the REF SELECT pin is set to logic low, the internal reference
      is disabled and an external reference voltage must be applied to
      the REFIN/REFOUT pin.
    maxItems: 1

  adc_reset:
    description:
      Must be the device tree identifier of the RESET pin.
    maxItems: 1

  adc_standby:
    description:
      Must be the device tree identifier of the STBY pin. This pin is used
      to place the AD7606 into one of two power-down modes, Standby mode or
      Shutdown mode.
    maxItems: 1

  adc_range:
    description:
      Must be the device tree identifier of the RANGE pin. The polarity on
      this pin determines the input range of the analog input channels in
      ADC Hardware Mode.
    maxItems: 1

  adc_os:
    description:
      Must be the device tree identifier of the over-sampling
      mode pins. As the line is active high, it should be marked
      GPIO_ACTIVE_HIGH to enter ADC Software Mode.
    maxItems: 3

required:
  - compatible
  - reg
  - clocks
  - clock-names
  - dmas
  - dma-names
  - pwms
  - pwm-names
  - vref

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    #include <dt-bindings/pwm/pwm.h>
    ad7606x_pi: adc@44a00000 {
                compatible = "ad7606x-pi-16";
                reg = <0x44a00000 0x20000>;
                clocks = <&ext_clk>;
                clock-names = "ad7606x_pi_clk";
                dmas = <&rx_dma 0>;
                dma-names = "ad7606x-pi-adc-dma";
                pwms = <&axi_pwm_gen 0 0>;
                pwm-names = "cnvst_n";
                vref = "ad7606x_pi_vref";
                adc_serpar = <&gpio0 97 GPIO_ACTIVE_LOW>;
                adc_refsel = <&gpio0 96 GPIO_ACTIVE_HIGH>;
                adc_reset = <&gpio0 95 GPIO_ACTIVE_LOW>;
                adc_standby = <&gpio0 94 GPIO_ACTIVE_HIGH>;
                adc_range = <&gpio0 93 GPIO_ACTIVE_LOW>;
                adc_os = <&gpio0 92 GPIO_ACTIVE_HIGH &gpio0 91 GPIO_ACTIVE_HIGH &gpio0 90 GPIO_ACTIVE_HIGH>;
    };
...
